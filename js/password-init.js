(()=>{let u=new Map,c="";function t(){var t,e=document.querySelectorAll(".password-block");c||(t=document.querySelector('meta[name="security-hash"]'))&&(t=t.getAttribute("content")||"",c=(t=>{if(!t)return"";try{return atob(t).split("").reverse().join("")}catch(t){return console.error("解密密码时出错"),""}})(t)),e.forEach(t=>{let e=t.querySelector(".password-input");var r=t.querySelector(".password-submit");let a=t.querySelector(".password-content"),n=t.querySelector(".password-input-container"),o=t.getAttribute("id")||"pwd-"+Math.random().toString(36).substr(2,9);t.getAttribute("id")||t.setAttribute("id",o);var i=t.getAttribute("data-password"),s=t.hasAttribute("data-global"),d=t.hasAttribute("data-encrypted");if(!u.has(o)){if(s&&c)u.set(o,c);else if(i){let t=i;if(d&&"GLOBAL_PASSWORD"!==i)try{t=atob(i)}catch(t){console.error("解密密码时出错")}u.set(o,t)}t.removeAttribute("data-password"),t.removeAttribute("data-encrypted")}e&&r&&!e.hasAttribute("data-initialized")&&(r.addEventListener("click",function(){l(e,a,n,o)}),e.addEventListener("keypress",function(t){"Enter"===t.key&&l(e,a,n,o)}),e.setAttribute("data-initialized","true"))})}function l(t,e,r,a){a=u.get(a);t.value===a?(e.style.display="block",r.style.display="none","undefined"!=typeof anzhiyu&&anzhiyu.snackbarShow?anzhiyu.snackbarShow("密码正确",!1,2e3):console.log("密码正确")):"undefined"!=typeof anzhiyu&&anzhiyu.snackbarShow?anzhiyu.snackbarShow("密码错误",!1,2e3):console.log("密码错误")}document.addEventListener("pjax:complete",t),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()})();